const _0x1c6635=_0x3e47;function _0x3e47(_0x54d55f,_0x347fd0){const _0x25a895=_0x25a8();return _0x3e47=function(_0x3e472c,_0x2b587f){_0x3e472c=_0x3e472c-0x77;let _0x53b30d=_0x25a895[_0x3e472c];return _0x53b30d;},_0x3e47(_0x54d55f,_0x347fd0);}function _0x25a8(){const _0x2a747d=['https://ipinfo.io/json','node-fetch','1837vajZyj','1169100bmveVv','country','\x20using\x20proxy:\x20','location','json','error','138yfYikG','https://api.pipecdn.app/api/points','city','18oTMzpV','stringify','https://api.pipecdn.app/api/heartbeat','2622968EeCbzG','1162533eFCSEz','Bearer\x20','694958vqwEkW','message','info','text','Error\x20sending\x20heartbeat\x20for\x20','Failed\x20to\x20send\x20heartbeat\x20for\x20','627940SZjWGj','../app/src/utils/logger','35rJJYvH','points','47350eNtabw','region','unknown','400288eHgNkf','No\x20proxies\x20available.\x20Please\x20check\x20your\x20proxy.txt\x20file.','application/json','Failed\x20to\x20fetch\x20points\x20for\x20','length','Error\x20fetching\x20points\x20for\x20','now'];_0x25a8=function(){return _0x2a747d;};return _0x25a8();}(function(_0x3094eb,_0x162664){const _0x5397dd=_0x3e47,_0xfa7acf=_0x3094eb();while(!![]){try{const _0x556dc8=-parseInt(_0x5397dd(0x7f))/0x1+parseInt(_0x5397dd(0x96))/0x2+-parseInt(_0x5397dd(0x7d))/0x3+parseInt(_0x5397dd(0x85))/0x4*(parseInt(_0x5397dd(0x87))/0x5)+parseInt(_0x5397dd(0x9c))/0x6*(-parseInt(_0x5397dd(0x8c))/0x7)+-parseInt(_0x5397dd(0x7c))/0x8*(-parseInt(_0x5397dd(0x79))/0x9)+-parseInt(_0x5397dd(0x89))/0xa*(-parseInt(_0x5397dd(0x95))/0xb);if(_0x556dc8===_0x162664)break;else _0xfa7acf['push'](_0xfa7acf['shift']());}catch(_0x569b1c){_0xfa7acf['push'](_0xfa7acf['shift']());}}}(_0x25a8,0xb2c47));const fetch=require(_0x1c6635(0x94)),{HttpsProxyAgent}=require('https-proxy-agent'),{readToken,loadProxies}=require('../app/src/utils/file'),{logger}=require(_0x1c6635(0x86));async function fetchPoints(_0x12dc8f,_0x2eafb4,_0x4886ce){const _0x23cf97=_0x1c6635;try{const _0x2ea152=await fetch(_0x23cf97(0x77),{'headers':{'Authorization':_0x23cf97(0x7e)+_0x12dc8f},'agent':_0x4886ce});if(_0x2ea152['ok']){const _0x53a0e9=await _0x2ea152['json']();logger('Current\x20Points\x20for\x20'+_0x2eafb4+':',_0x23cf97(0x81),_0x53a0e9[_0x23cf97(0x88)]);}else logger(_0x23cf97(0x8f)+_0x2eafb4+':','error',_0x2ea152['status']);}catch(_0x50190f){logger(_0x23cf97(0x91)+_0x2eafb4+':','error',_0x50190f[_0x23cf97(0x80)]);}}async function sendHeartbeat(){const _0x257068=_0x1c6635,_0x2a6028=await loadProxies();if(_0x2a6028[_0x257068(0x90)]===0x0){logger(_0x257068(0x8d),_0x257068(0x9b));return;}const _0x4cb983=await readToken();for(let _0x49e301=0x0;_0x49e301<_0x4cb983[_0x257068(0x90)];_0x49e301++){const {token:_0x2901eb,username:_0x182f68}=_0x4cb983[_0x49e301],_0x14544a=_0x2a6028[_0x49e301%_0x2a6028[_0x257068(0x90)]],_0x3e86a5=new HttpsProxyAgent(_0x14544a);try{const _0x3033f5=await fetchGeoLocation(_0x3e86a5),_0x2a65a1=await fetch(_0x257068(0x7b),{'method':'POST','headers':{'Authorization':'Bearer\x20'+_0x2901eb,'Content-Type':_0x257068(0x8e)},'body':JSON[_0x257068(0x7a)]({'ip':_0x3033f5['ip'],'location':_0x3033f5[_0x257068(0x99)],'timestamp':Date[_0x257068(0x92)]()}),'agent':_0x3e86a5});_0x2a65a1['ok']?(logger('Heartbeat\x20sent\x20successfully\x20for\x20'+_0x182f68+_0x257068(0x98)+_0x14544a,'success'),await fetchPoints(_0x2901eb,_0x182f68,_0x3e86a5)):logger(_0x257068(0x84)+_0x182f68+':','error',await _0x2a65a1[_0x257068(0x82)]());}catch(_0x40dd1c){logger(_0x257068(0x83)+_0x182f68+':',_0x257068(0x9b),_0x40dd1c);}}}async function fetchGeoLocation(_0x523dc7){const _0x59deed=_0x1c6635;try{const _0x22199a=await fetch(_0x59deed(0x93),{'agent':_0x523dc7});if(!_0x22199a['ok'])throw new Error('Failed\x20to\x20fetch\x20Geo-location\x20data');const _0x4cd864=await _0x22199a[_0x59deed(0x9a)]();return{'ip':_0x4cd864['ip'],'location':_0x4cd864[_0x59deed(0x78)]+',\x20'+_0x4cd864[_0x59deed(0x8a)]+',\x20'+_0x4cd864[_0x59deed(0x97)]};}catch(_0x3eb6b3){return console[_0x59deed(0x9b)]('Geo-location\x20error:',_0x3eb6b3),{'ip':'unknown','location':_0x59deed(0x8b)};}}module['exports']={'sendHeartbeat':sendHeartbeat};
